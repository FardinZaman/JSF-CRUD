<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="jakarta.faces.html"
                xmlns:f="jakarta.faces.core"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/layout.xhtml">
    <ui:param name="title" value="Weapn Shop - Add New Weapon"/>

    <ui:define name="content">

        <h:form id="form">
            <h2>Add New Weapon</h2>

            <p:avatar id="avatar" styleClass="mr-6" shape="rectangle" style="width: 480px; height: 240px;">
                <img src="data:image/png;base64,#{weaponBean.weapon.imageAsBase64}" alt="Image"/>
            </p:avatar>
            <p:fileUpload id="avatar_upload" mode="advanced" skinSimple="true" label="Upload Image" auto="true"
                          listener="#{weaponBean.handleImageUpload}"
                          update="form:avatar" process="@this"
                          sizeLimit="2097152"
                          accept=".gif,.jpg,.jpeg,.png"
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>

            <h:panelGrid columns="6" cellpadding="10" cellspacing="10">
                <p:outputLabel for="name" value="Name"/>
                <p:inputText id="name" value="#{weaponBean.weapon.name}"/>

                <p:outputLabel for="serial" value="Serial Number"/>
                <p:inputText id="serial" value="#{weaponBean.weapon.serialNumber}"/>

                <p:outputLabel for="weaponType" value="Weapon Type"/>
                <p:selectOneMenu id="weaponType" value="#{weaponBean.weapon.weaponType}">
                    <f:selectItem itemLabel="-- Select Weapon Type --" itemValue="" />
                    <f:selectItems value="#{weaponBean.weaponTypes}" />
                </p:selectOneMenu>

                <p:outputLabel for="caliber" value="Caliber"/>
                <p:selectOneMenu id="caliber" value="#{weaponBean.weapon.caliber}">
                    <f:selectItem itemLabel="-- Select Caliber --" itemValue="" />
                    <f:selectItems value="#{weaponBean.calibers}" />
                </p:selectOneMenu>

                <p:outputLabel for="manufacturer" value="Manufacturer"/>
                <p:inputText id="manufacturer" value="#{weaponBean.weapon.manufacturer}"/>


                <p:outputLabel for="countryAutoComplete" value="Country of Origin" />
                <p:autoComplete id="countryAutoComplete"
                                value="#{weaponBean.weapon.countryOfOrigin}"
                                completeMethod="#{weaponBean.completeCountry}"
                                var="country"
                                itemLabel="#{country}"
                                itemValue="#{country}"
                                forceSelection="true"
                                dropdown="true"/>

                <p:outputLabel for="price" value="Price"/>
                <p:inputText id="price" value="#{weaponBean.weapon.price}"/>

                <p:outputLabel for="stock" value="Stock Quantity"/>
                <p:inputText id="stock" value="#{weaponBean.weapon.stockQuantity}"/>

                <p:outputLabel for="weight" value="Weight In Kg"/>
                <p:inputText id="weight" value="#{weaponBean.weapon.weightInKg}"/>

                <p:outputLabel for="barrel" value="Barrel Length In cm"/>
                <p:inputText id="barrel" value="#{weaponBean.weapon.barrelLengthInCm}"/>

                <p:outputLabel for="actionType" value="Action Type"/>
                <p:selectOneMenu id="actionType" value="#{weaponBean.weapon.actionType}">
                    <f:selectItem itemLabel="-- Select Action Type --" itemValue="" />
                    <f:selectItems value="#{weaponBean.actionTypes}" />
                </p:selectOneMenu>

                <p:outputLabel for="ammo" value="Ammo Capacity"/>
                <p:inputText id="ammo" value="#{weaponBean.weapon.ammoCapacity}"/>

                <p:outputLabel for="material" value="Material"/>
                <p:selectOneMenu id="material" value="#{weaponBean.weapon.material}">
                    <f:selectItem itemLabel="-- Select Material --" itemValue="" />
                    <f:selectItems value="#{weaponBean.materials}" />
                </p:selectOneMenu>

                <p:outputLabel for="category" value="Category"/>
                <p:selectOneMenu id="category" value="#{weaponBean.weapon.category}">
                    <f:selectItem itemLabel="-- Select Category --" itemValue="" />
                    <f:selectItems value="#{weaponBean.categories}" />
                </p:selectOneMenu>

                <p:outputLabel for="supplier" value="Supplier"/>
                <p:inputText id="supplier" value="#{weaponBean.weapon.supplier}"/>

                <p:outputLabel for="purchaseDate" value="Purchase Date"/>
                <p:calendar id="purchaseDate" value="#{weaponBean.weapon.purchaseDate}" showOn="button" navigator="true" yearRange="1950:2100"/>

                <p:outputLabel for="isNew" value="Is Weapon New"/>
                <p:selectBooleanCheckbox id="isNew" value="#{weaponBean.weapon.new}"/>

            </h:panelGrid>

            <p:commandButton value="Cancel"
                             action="weapon-list?faces-redirect=true"
                             immediate="true"
                             styleClass="ui-button-secondary"/>
            <p:spacer/><p:spacer/>
            <p:commandButton value="Submit"
                             action="#{weaponBean.addWeapon}"/>
        </h:form>
    </ui:define>

</ui:composition>
